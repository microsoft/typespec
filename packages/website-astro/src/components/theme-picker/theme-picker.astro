---
import { Icon } from "@astrojs/starlight/components";
---

<style>
  #theme-picker {
    display: flex;
    align-items: flex-start;
    padding: 4px 6px;
    gap: 6px;
    border: 1px solid var(--colorNeutralStroke1);
    border-radius: 70px;
  }

  .theme-option {
    cursor: pointer;
    display: flex;
    padding: 2px;
    justify-content: center;
    align-items: center;
    color: var(--colorNeutralForeground2);
  }

  .theme-option:hover {
    color: var(--colorNeutralForeground1);
    border-radius: 50%;
  }

  :global(html[data-theme="light"]) .light,
  :global(html[data-theme="dark"]) .dark {
    background-color: var(--colorBrandForeground1);
    border-radius: 50%;
  }

  [data-theme="light"] .selected {
    color: var(--colorNeutralStroke1);
  }
</style>

<script>
  import { setColorMode, getColorMode } from "../docusaurus/core/theme-common";

  const handleToggleClick = () => {
    const current = getColorMode();
    const next = current === "dark" ? "light" : "dark";
    setColorMode(next);
    const element = document.documentElement;
    element.classList.toggle("dark");

    const isDark = element.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
  };

  document.getElementById("theme-picker")!.addEventListener("click", handleToggleClick);
</script>

<div id="theme-picker" aria-label="Toggle Light/Dark theme" tabindex="0">
  <div title="Light mode" class="theme-option light">
    <Icon name="sun" />
  </div>
  <div title="Dark mode" class="theme-option dark">
    <Icon name="moon" />
  </div>
</div>
