---
changeKind: breaking
packages:
  - "@typespec/emitter-framework"
---

TypeScript: Adopt DeclarationProvider, which changes how refkeys to declarations are assigned and referenced. The current provider vends fresh refkeys when needed, so `refkey(type)` is no longer a viable way to refer to declarations created by the emitter framework. Replace all forms of `refkey(type)` with `dp.getRefkey(type)`.