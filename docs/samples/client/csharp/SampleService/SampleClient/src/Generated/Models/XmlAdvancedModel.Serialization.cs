// <auto-generated/>

#nullable disable

using System;
using System.ClientModel;
using System.ClientModel.Primitives;
using System.Collections.Generic;
using System.IO;
using System.Xml.Linq;

namespace SampleTypeSpec
{
    /// <summary> An advanced XML model for testing various property types and XML features. </summary>
    public partial class XmlAdvancedModel
    {
        /// <summary> Initializes a new instance of <see cref="XmlAdvancedModel"/> for deserialization. </summary>
        internal XmlAdvancedModel()
        {
        }

        /// <param name="data"> The data to parse. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        protected virtual XmlAdvancedModel PersistableModelCreateCore(BinaryData data, ModelReaderWriterOptions options)
        {
            string format = options.Format == "W" ? ((IPersistableModel<XmlAdvancedModel>)this).GetFormatFromOptions(options) : options.Format;
            switch (format)
            {
                case "X":
                    using (Stream dataStream = data.ToStream())
                    {
                        return DeserializeXmlAdvancedModel(XElement.Load(dataStream, LoadOptions.PreserveWhitespace), options);
                    }
                default:
                    throw new FormatException($"The model {nameof(XmlAdvancedModel)} does not support reading '{options.Format}' format.");
            }
        }

        /// <param name="result"> The <see cref="ClientResult"/> to deserialize the <see cref="XmlAdvancedModel"/> from. </param>
        public static explicit operator XmlAdvancedModel(ClientResult result)
        {
            using PipelineResponse response = result.GetRawResponse();
            using Stream stream = response.ContentStream;
            if (stream == null)
            {
                return default;
            }

            return DeserializeXmlAdvancedModel(XElement.Load(stream, LoadOptions.PreserveWhitespace), ModelSerializationExtensions.WireOptions);
        }

        /// <param name="element"> The xml element to deserialize. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        internal static XmlAdvancedModel DeserializeXmlAdvancedModel(XElement element, ModelReaderWriterOptions options)
        {
            if (element == null)
            {
                return null;
            }

            XNamespace labelNs = "https://example.com/ns1";
            XNamespace daysUsedNs = "https://example.com/ns2";
            XNamespace fooItemsNs = "http://www.contoso.com/anotherbook.dtd";
            XNamespace anotherModelNs = "http://www.contoso.com/anothermodel.dtd";
            XNamespace modelsWithNamespacesNs = "http://www.example.com/namespace";

            string name = default;
            int age = default;
            bool enabled = default;
            float score = default;
            string optionalString = default;
            int? optionalInt = default;
            string nullableString = default;
            string id = default;
            int version = default;
            bool isActive = default;
            string originalName = default;
            string xmlIdentifier = default;
            string content = default;
            IList<string> unwrappedStrings = default;
            IList<int> unwrappedCounts = default;
            IList<XmlItem> unwrappedItems = default;
            IList<string> wrappedColors = default;
            IList<XmlItem> items = default;
            XmlNestedModel nestedModel = default;
            XmlNestedModel optionalNestedModel = default;
            IDictionary<string, string> metadata = default;
            DateTimeOffset createdAt = default;
            TimeSpan duration = default;
            BinaryData data = default;
            IDictionary<string, BinaryData> optionalRecordUnknown = default;
            StringFixedEnum fixedEnum = default;
            StringExtensibleEnum extensibleEnum = default;
            IntFixedEnum? optionalFixedEnum = default;
            IntExtensibleEnum? optionalExtensibleEnum = default;
            string label = default;
            int daysUsed = default;
            IList<string> fooItems = default;
            XmlNestedModel anotherModel = default;
            IList<XmlModelWithNamespace> modelsWithNamespaces = default;
            IList<XmlModelWithNamespace> unwrappedModelsWithNamespaces = default;
            IDictionary<string, BinaryData> additionalBinaryDataProperties = new ChangeTrackingDictionary<string, BinaryData>();

            foreach (var attr in element.Attributes())
            {
                string localName = attr.Name.LocalName;
                XNamespace ns = attr.Name.Namespace;

                if (localName == "id")
                {
                    id = (string)attr;
                    continue;
                }
                if (localName == "version")
                {
                    version = (int)attr;
                    continue;
                }
                if (localName == "isActive")
                {
                    isActive = (bool)attr;
                    continue;
                }
                if (localName == "xml-id")
                {
                    xmlIdentifier = (string)attr;
                    continue;
                }
                if (localName == "label" && ns == labelNs)
                {
                    label = (string)attr;
                    continue;
                }
            }

            foreach (var child in element.Elements())
            {
                string localName = child.Name.LocalName;
                XNamespace ns = child.Name.Namespace;

                if (localName == "name")
                {
                    name = (string)child;
                    continue;
                }
                if (localName == "age")
                {
                    age = (int)child;
                    continue;
                }
                if (localName == "enabled")
                {
                    enabled = (bool)child;
                    continue;
                }
                if (localName == "score")
                {
                    score = (float)child;
                    continue;
                }
                if (localName == "optionalString")
                {
                    optionalString = (string)child;
                    continue;
                }
                if (localName == "optionalInt")
                {
                    optionalInt = (int?)child;
                    continue;
                }
                if (localName == "nullableString")
                {
                    nullableString = (string)child;
                    continue;
                }
                if (localName == "RenamedProperty")
                {
                    originalName = (string)child;
                    continue;
                }
                if (localName == "unwrappedStrings")
                {
                    if (unwrappedStrings == null)
                    {
                        unwrappedStrings = new List<string>();
                    }
                    unwrappedStrings.Add((string)child);
                    continue;
                }
                if (localName == "unwrappedCounts")
                {
                    if (unwrappedCounts == null)
                    {
                        unwrappedCounts = new List<int>();
                    }
                    unwrappedCounts.Add((int)child);
                    continue;
                }
                if (localName == "unwrappedItems")
                {
                    if (unwrappedItems == null)
                    {
                        unwrappedItems = new List<XmlItem>();
                    }
                    unwrappedItems.Add(XmlItem.DeserializeXmlItem(child, options));
                    continue;
                }
                if (localName == "wrappedColors")
                {
                    List<string> array = new List<string>();
                    foreach (var e in child.Elements("string"))
                    {
                        array.Add((string)e);
                    }
                    wrappedColors = array;
                    continue;
                }
                if (localName == "ItemCollection")
                {
                    List<XmlItem> array = new List<XmlItem>();
                    foreach (var e in child.Elements("Item"))
                    {
                        array.Add(XmlItem.DeserializeXmlItem(e, options));
                    }
                    items = array;
                    continue;
                }
                if (localName == "nestedModel")
                {
                    nestedModel = XmlNestedModel.DeserializeXmlNestedModel(child, options);
                    continue;
                }
                if (localName == "optionalNestedModel")
                {
                    optionalNestedModel = XmlNestedModel.DeserializeXmlNestedModel(child, options);
                    continue;
                }
                if (localName == "metadata")
                {
                    Dictionary<string, string> dictionary = new Dictionary<string, string>();
                    foreach (var e in child.Elements())
                    {
                        dictionary.Add(e.Name.LocalName, (string)e);
                    }
                    metadata = dictionary;
                    continue;
                }
                if (localName == "createdAt")
                {
                    createdAt = child.GetDateTimeOffset("O");
                    continue;
                }
                if (localName == "duration")
                {
                    duration = child.GetTimeSpan("P");
                    continue;
                }
                if (localName == "data")
                {
                    data = BinaryData.FromBytes(child.GetBytesFromBase64("D"));
                    continue;
                }
                if (localName == "optionalRecordUnknown")
                {
                    Dictionary<string, BinaryData> dictionary = new Dictionary<string, BinaryData>();
                    foreach (var e in child.Elements())
                    {
                        dictionary.Add(e.Name.LocalName, BinaryData.FromString(e.Value));
                    }
                    optionalRecordUnknown = dictionary;
                    continue;
                }
                if (localName == "fixedEnum")
                {
                    fixedEnum = ((string)child).ToStringFixedEnum();
                    continue;
                }
                if (localName == "extensibleEnum")
                {
                    extensibleEnum = new StringExtensibleEnum((string)child);
                    continue;
                }
                if (localName == "optionalFixedEnum")
                {
                    optionalFixedEnum = ((int)child).ToIntFixedEnum();
                    continue;
                }
                if (localName == "optionalExtensibleEnum")
                {
                    optionalExtensibleEnum = new IntExtensibleEnum((int)child);
                    continue;
                }
                if (localName == "daysUsed" && ns == daysUsedNs)
                {
                    daysUsed = (int)child;
                    continue;
                }
                if (localName == "fooItems" && ns == fooItemsNs)
                {
                    List<string> array = new List<string>();
                    foreach (var e in child.Elements("string"))
                    {
                        array.Add((string)e);
                    }
                    fooItems = array;
                    continue;
                }
                if (localName == "anotherModel" && ns == anotherModelNs)
                {
                    anotherModel = XmlNestedModel.DeserializeXmlNestedModel(child, options);
                    continue;
                }
                if (localName == "modelsWithNamespaces")
                {
                    List<XmlModelWithNamespace> array = new List<XmlModelWithNamespace>();
                    foreach (var e in child.Elements(modelsWithNamespacesNs + "XmlModelWithNamespace"))
                    {
                        array.Add(XmlModelWithNamespace.DeserializeXmlModelWithNamespace(e, options));
                    }
                    modelsWithNamespaces = array;
                    continue;
                }
                if (localName == "unwrappedModelsWithNamespaces")
                {
                    if (unwrappedModelsWithNamespaces == null)
                    {
                        unwrappedModelsWithNamespaces = new List<XmlModelWithNamespace>();
                    }
                    unwrappedModelsWithNamespaces.Add(XmlModelWithNamespace.DeserializeXmlModelWithNamespace(child, options));
                    continue;
                }
            }
            content = element.Value;

            return new XmlAdvancedModel(
                name,
                age,
                enabled,
                score,
                optionalString,
                optionalInt,
                nullableString,
                id,
                version,
                isActive,
                originalName,
                xmlIdentifier,
                content,
                unwrappedStrings,
                unwrappedCounts,
                unwrappedItems,
                wrappedColors,
                items,
                nestedModel,
                optionalNestedModel,
                metadata,
                createdAt,
                duration,
                data,
                optionalRecordUnknown ?? new ChangeTrackingDictionary<string, BinaryData>(),
                fixedEnum,
                extensibleEnum,
                optionalFixedEnum,
                optionalExtensibleEnum,
                label,
                daysUsed,
                fooItems,
                anotherModel,
                modelsWithNamespaces,
                unwrappedModelsWithNamespaces,
                additionalBinaryDataProperties);
        }
    }
}
