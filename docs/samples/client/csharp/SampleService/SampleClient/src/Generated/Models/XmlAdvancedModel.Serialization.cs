// <auto-generated/>

#nullable disable

using System;
using System.ClientModel;
using System.ClientModel.Primitives;
using System.Collections.Generic;
using System.Text.Json;

namespace SampleTypeSpec
{
    /// <summary> An advanced XML model for testing various property types and XML features. </summary>
    public partial class XmlAdvancedModel : IJsonModel<XmlAdvancedModel>
    {
        /// <summary> Initializes a new instance of <see cref="XmlAdvancedModel"/> for deserialization. </summary>
        internal XmlAdvancedModel()
        {
        }

        /// <param name="writer"> The JSON writer. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        void IJsonModel<XmlAdvancedModel>.Write(Utf8JsonWriter writer, ModelReaderWriterOptions options)
        {
            writer.WriteStartObject();
            JsonModelWriteCore(writer, options);
            writer.WriteEndObject();
        }

        /// <param name="writer"> The JSON writer. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        protected virtual void JsonModelWriteCore(Utf8JsonWriter writer, ModelReaderWriterOptions options)
        {
            string format = options.Format == "W" ? ((IPersistableModel<XmlAdvancedModel>)this).GetFormatFromOptions(options) : options.Format;
            if (format != "J")
            {
                throw new FormatException($"The model {nameof(XmlAdvancedModel)} does not support writing '{format}' format.");
            }
            writer.WritePropertyName("name"u8);
            writer.WriteStringValue(Name);
            writer.WritePropertyName("age"u8);
            writer.WriteNumberValue(Age);
            writer.WritePropertyName("enabled"u8);
            writer.WriteBooleanValue(Enabled);
            writer.WritePropertyName("score"u8);
            writer.WriteNumberValue(Score);
            if (Optional.IsDefined(OptionalString))
            {
                writer.WritePropertyName("optionalString"u8);
                writer.WriteStringValue(OptionalString);
            }
            if (Optional.IsDefined(OptionalInt))
            {
                writer.WritePropertyName("optionalInt"u8);
                writer.WriteNumberValue(OptionalInt.Value);
            }
            if (Optional.IsDefined(NullableString))
            {
                writer.WritePropertyName("nullableString"u8);
                writer.WriteStringValue(NullableString);
            }
            else
            {
                writer.WriteNull("nullableString"u8);
            }
            writer.WritePropertyName("id"u8);
            writer.WriteStringValue(Id);
            writer.WritePropertyName("version"u8);
            writer.WriteNumberValue(Version);
            writer.WritePropertyName("isActive"u8);
            writer.WriteBooleanValue(IsActive);
            writer.WritePropertyName("RenamedProperty"u8);
            writer.WriteStringValue(OriginalName);
            writer.WritePropertyName("xml-id"u8);
            writer.WriteStringValue(XmlIdentifier);
            writer.WritePropertyName("content"u8);
            writer.WriteStringValue(Content);
            writer.WritePropertyName("unwrappedStrings"u8);
            writer.WriteStartArray();
            foreach (string item in UnwrappedStrings)
            {
                if (item == null)
                {
                    writer.WriteNullValue();
                    continue;
                }
                writer.WriteStringValue(item);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("unwrappedCounts"u8);
            writer.WriteStartArray();
            foreach (int item in UnwrappedCounts)
            {
                writer.WriteNumberValue(item);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("unwrappedItems"u8);
            writer.WriteStartArray();
            foreach (XmlItem item in UnwrappedItems)
            {
                writer.WriteObjectValue(item, options);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("wrappedColors"u8);
            writer.WriteStartArray();
            foreach (string item in WrappedColors)
            {
                if (item == null)
                {
                    writer.WriteNullValue();
                    continue;
                }
                writer.WriteStringValue(item);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("ItemCollection"u8);
            writer.WriteStartArray();
            foreach (XmlItem item in Items)
            {
                writer.WriteObjectValue(item, options);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("nestedModel"u8);
            writer.WriteObjectValue(NestedModel, options);
            if (Optional.IsDefined(OptionalNestedModel))
            {
                writer.WritePropertyName("optionalNestedModel"u8);
                writer.WriteObjectValue(OptionalNestedModel, options);
            }
            writer.WritePropertyName("metadata"u8);
            writer.WriteStartObject();
            foreach (var item in Metadata)
            {
                writer.WritePropertyName(item.Key);
                if (item.Value == null)
                {
                    writer.WriteNullValue();
                    continue;
                }
                writer.WriteStringValue(item.Value);
            }
            writer.WriteEndObject();
            writer.WritePropertyName("createdAt"u8);
            writer.WriteStringValue(CreatedAt, "O");
            writer.WritePropertyName("duration"u8);
            writer.WriteStringValue(Duration, "P");
            writer.WritePropertyName("data"u8);
            writer.WriteBase64StringValue(Data.ToArray(), "D");
            if (Optional.IsCollectionDefined(OptionalRecordUnknown))
            {
                writer.WritePropertyName("optionalRecordUnknown"u8);
                writer.WriteStartObject();
                foreach (var item in OptionalRecordUnknown)
                {
                    writer.WritePropertyName(item.Key);
                    if (item.Value == null)
                    {
                        writer.WriteNullValue();
                        continue;
                    }
#if NET6_0_OR_GREATER
                    writer.WriteRawValue(item.Value);
#else
                    using (JsonDocument document = JsonDocument.Parse(item.Value))
                    {
                        JsonSerializer.Serialize(writer, document.RootElement);
                    }
#endif
                }
                writer.WriteEndObject();
            }
            writer.WritePropertyName("fixedEnum"u8);
            writer.WriteStringValue(FixedEnum.ToSerialString());
            writer.WritePropertyName("extensibleEnum"u8);
            writer.WriteStringValue(ExtensibleEnum.ToString());
            if (Optional.IsDefined(OptionalFixedEnum))
            {
                writer.WritePropertyName("optionalFixedEnum"u8);
                writer.WriteNumberValue((int)OptionalFixedEnum.Value);
            }
            if (Optional.IsDefined(OptionalExtensibleEnum))
            {
                writer.WritePropertyName("optionalExtensibleEnum"u8);
                writer.WriteNumberValue(OptionalExtensibleEnum.Value.ToSerialInt32());
            }
            writer.WritePropertyName("label"u8);
            writer.WriteStringValue(Label);
            writer.WritePropertyName("daysUsed"u8);
            writer.WriteNumberValue(DaysUsed);
            writer.WritePropertyName("fooItems"u8);
            writer.WriteStartArray();
            foreach (string item in FooItems)
            {
                if (item == null)
                {
                    writer.WriteNullValue();
                    continue;
                }
                writer.WriteStringValue(item);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("anotherModel"u8);
            writer.WriteObjectValue(AnotherModel, options);
            writer.WritePropertyName("modelsWithNamespaces"u8);
            writer.WriteStartArray();
            foreach (XmlModelWithNamespace item in ModelsWithNamespaces)
            {
                writer.WriteObjectValue(item, options);
            }
            writer.WriteEndArray();
            writer.WritePropertyName("unwrappedModelsWithNamespaces"u8);
            writer.WriteStartArray();
            foreach (XmlModelWithNamespace item in UnwrappedModelsWithNamespaces)
            {
                writer.WriteObjectValue(item, options);
            }
            writer.WriteEndArray();
            if (options.Format != "W" && _additionalBinaryDataProperties != null)
            {
                foreach (var item in _additionalBinaryDataProperties)
                {
                    writer.WritePropertyName(item.Key);
#if NET6_0_OR_GREATER
                    writer.WriteRawValue(item.Value);
#else
                    using (JsonDocument document = JsonDocument.Parse(item.Value))
                    {
                        JsonSerializer.Serialize(writer, document.RootElement);
                    }
#endif
                }
            }
        }

        /// <param name="reader"> The JSON reader. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        XmlAdvancedModel IJsonModel<XmlAdvancedModel>.Create(ref Utf8JsonReader reader, ModelReaderWriterOptions options) => JsonModelCreateCore(ref reader, options);

        /// <param name="reader"> The JSON reader. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        protected virtual XmlAdvancedModel JsonModelCreateCore(ref Utf8JsonReader reader, ModelReaderWriterOptions options)
        {
            string format = options.Format == "W" ? ((IPersistableModel<XmlAdvancedModel>)this).GetFormatFromOptions(options) : options.Format;
            if (format != "J")
            {
                throw new FormatException($"The model {nameof(XmlAdvancedModel)} does not support reading '{format}' format.");
            }
            using JsonDocument document = JsonDocument.ParseValue(ref reader);
            return DeserializeXmlAdvancedModel(document.RootElement, options);
        }

        /// <param name="element"> The JSON element to deserialize. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        internal static XmlAdvancedModel DeserializeXmlAdvancedModel(JsonElement element, ModelReaderWriterOptions options)
        {
            if (element.ValueKind == JsonValueKind.Null)
            {
                return null;
            }
            string name = default;
            int age = default;
            bool enabled = default;
            float score = default;
            string optionalString = default;
            int? optionalInt = default;
            string nullableString = default;
            string id = default;
            int version = default;
            bool isActive = default;
            string originalName = default;
            string xmlIdentifier = default;
            string content = default;
            IList<string> unwrappedStrings = default;
            IList<int> unwrappedCounts = default;
            IList<XmlItem> unwrappedItems = default;
            IList<string> wrappedColors = default;
            IList<XmlItem> items = default;
            XmlNestedModel nestedModel = default;
            XmlNestedModel optionalNestedModel = default;
            IDictionary<string, string> metadata = default;
            DateTimeOffset createdAt = default;
            TimeSpan duration = default;
            BinaryData data = default;
            IDictionary<string, BinaryData> optionalRecordUnknown = default;
            StringFixedEnum fixedEnum = default;
            StringExtensibleEnum extensibleEnum = default;
            IntFixedEnum? optionalFixedEnum = default;
            IntExtensibleEnum? optionalExtensibleEnum = default;
            string label = default;
            int daysUsed = default;
            IList<string> fooItems = default;
            XmlNestedModel anotherModel = default;
            IList<XmlModelWithNamespace> modelsWithNamespaces = default;
            IList<XmlModelWithNamespace> unwrappedModelsWithNamespaces = default;
            IDictionary<string, BinaryData> additionalBinaryDataProperties = new ChangeTrackingDictionary<string, BinaryData>();
            foreach (var prop in element.EnumerateObject())
            {
                if (prop.NameEquals("name"u8))
                {
                    name = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("age"u8))
                {
                    age = prop.Value.GetInt32();
                    continue;
                }
                if (prop.NameEquals("enabled"u8))
                {
                    enabled = prop.Value.GetBoolean();
                    continue;
                }
                if (prop.NameEquals("score"u8))
                {
                    score = prop.Value.GetSingle();
                    continue;
                }
                if (prop.NameEquals("optionalString"u8))
                {
                    optionalString = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("optionalInt"u8))
                {
                    if (prop.Value.ValueKind == JsonValueKind.Null)
                    {
                        continue;
                    }
                    optionalInt = prop.Value.GetInt32();
                    continue;
                }
                if (prop.NameEquals("nullableString"u8))
                {
                    if (prop.Value.ValueKind == JsonValueKind.Null)
                    {
                        nullableString = null;
                        continue;
                    }
                    nullableString = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("id"u8))
                {
                    id = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("version"u8))
                {
                    version = prop.Value.GetInt32();
                    continue;
                }
                if (prop.NameEquals("isActive"u8))
                {
                    isActive = prop.Value.GetBoolean();
                    continue;
                }
                if (prop.NameEquals("RenamedProperty"u8))
                {
                    originalName = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("xml-id"u8))
                {
                    xmlIdentifier = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("content"u8))
                {
                    content = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("unwrappedStrings"u8))
                {
                    List<string> array = new List<string>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        if (item.ValueKind == JsonValueKind.Null)
                        {
                            array.Add(null);
                        }
                        else
                        {
                            array.Add(item.GetString());
                        }
                    }
                    unwrappedStrings = array;
                    continue;
                }
                if (prop.NameEquals("unwrappedCounts"u8))
                {
                    List<int> array = new List<int>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        array.Add(item.GetInt32());
                    }
                    unwrappedCounts = array;
                    continue;
                }
                if (prop.NameEquals("unwrappedItems"u8))
                {
                    List<XmlItem> array = new List<XmlItem>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        array.Add(XmlItem.DeserializeXmlItem(item, options));
                    }
                    unwrappedItems = array;
                    continue;
                }
                if (prop.NameEquals("wrappedColors"u8))
                {
                    List<string> array = new List<string>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        if (item.ValueKind == JsonValueKind.Null)
                        {
                            array.Add(null);
                        }
                        else
                        {
                            array.Add(item.GetString());
                        }
                    }
                    wrappedColors = array;
                    continue;
                }
                if (prop.NameEquals("ItemCollection"u8))
                {
                    List<XmlItem> array = new List<XmlItem>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        array.Add(XmlItem.DeserializeXmlItem(item, options));
                    }
                    items = array;
                    continue;
                }
                if (prop.NameEquals("nestedModel"u8))
                {
                    nestedModel = XmlNestedModel.DeserializeXmlNestedModel(prop.Value, options);
                    continue;
                }
                if (prop.NameEquals("optionalNestedModel"u8))
                {
                    if (prop.Value.ValueKind == JsonValueKind.Null)
                    {
                        continue;
                    }
                    optionalNestedModel = XmlNestedModel.DeserializeXmlNestedModel(prop.Value, options);
                    continue;
                }
                if (prop.NameEquals("metadata"u8))
                {
                    Dictionary<string, string> dictionary = new Dictionary<string, string>();
                    foreach (var prop0 in prop.Value.EnumerateObject())
                    {
                        if (prop0.Value.ValueKind == JsonValueKind.Null)
                        {
                            dictionary.Add(prop0.Name, null);
                        }
                        else
                        {
                            dictionary.Add(prop0.Name, prop0.Value.GetString());
                        }
                    }
                    metadata = dictionary;
                    continue;
                }
                if (prop.NameEquals("createdAt"u8))
                {
                    createdAt = prop.Value.GetDateTimeOffset("O");
                    continue;
                }
                if (prop.NameEquals("duration"u8))
                {
                    duration = prop.Value.GetTimeSpan("P");
                    continue;
                }
                if (prop.NameEquals("data"u8))
                {
                    data = BinaryData.FromBytes(prop.Value.GetBytesFromBase64("D"));
                    continue;
                }
                if (prop.NameEquals("optionalRecordUnknown"u8))
                {
                    if (prop.Value.ValueKind == JsonValueKind.Null)
                    {
                        continue;
                    }
                    Dictionary<string, BinaryData> dictionary = new Dictionary<string, BinaryData>();
                    foreach (var prop0 in prop.Value.EnumerateObject())
                    {
                        if (prop0.Value.ValueKind == JsonValueKind.Null)
                        {
                            dictionary.Add(prop0.Name, null);
                        }
                        else
                        {
                            dictionary.Add(prop0.Name, BinaryData.FromString(prop0.Value.GetRawText()));
                        }
                    }
                    optionalRecordUnknown = dictionary;
                    continue;
                }
                if (prop.NameEquals("fixedEnum"u8))
                {
                    fixedEnum = prop.Value.GetString().ToStringFixedEnum();
                    continue;
                }
                if (prop.NameEquals("extensibleEnum"u8))
                {
                    extensibleEnum = new StringExtensibleEnum(prop.Value.GetString());
                    continue;
                }
                if (prop.NameEquals("optionalFixedEnum"u8))
                {
                    if (prop.Value.ValueKind == JsonValueKind.Null)
                    {
                        continue;
                    }
                    optionalFixedEnum = prop.Value.GetInt32().ToIntFixedEnum();
                    continue;
                }
                if (prop.NameEquals("optionalExtensibleEnum"u8))
                {
                    if (prop.Value.ValueKind == JsonValueKind.Null)
                    {
                        continue;
                    }
                    optionalExtensibleEnum = new IntExtensibleEnum(prop.Value.GetInt32());
                    continue;
                }
                if (prop.NameEquals("label"u8))
                {
                    label = prop.Value.GetString();
                    continue;
                }
                if (prop.NameEquals("daysUsed"u8))
                {
                    daysUsed = prop.Value.GetInt32();
                    continue;
                }
                if (prop.NameEquals("fooItems"u8))
                {
                    List<string> array = new List<string>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        if (item.ValueKind == JsonValueKind.Null)
                        {
                            array.Add(null);
                        }
                        else
                        {
                            array.Add(item.GetString());
                        }
                    }
                    fooItems = array;
                    continue;
                }
                if (prop.NameEquals("anotherModel"u8))
                {
                    anotherModel = XmlNestedModel.DeserializeXmlNestedModel(prop.Value, options);
                    continue;
                }
                if (prop.NameEquals("modelsWithNamespaces"u8))
                {
                    List<XmlModelWithNamespace> array = new List<XmlModelWithNamespace>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        array.Add(XmlModelWithNamespace.DeserializeXmlModelWithNamespace(item, options));
                    }
                    modelsWithNamespaces = array;
                    continue;
                }
                if (prop.NameEquals("unwrappedModelsWithNamespaces"u8))
                {
                    List<XmlModelWithNamespace> array = new List<XmlModelWithNamespace>();
                    foreach (var item in prop.Value.EnumerateArray())
                    {
                        array.Add(XmlModelWithNamespace.DeserializeXmlModelWithNamespace(item, options));
                    }
                    unwrappedModelsWithNamespaces = array;
                    continue;
                }
                if (options.Format != "W")
                {
                    additionalBinaryDataProperties.Add(prop.Name, BinaryData.FromString(prop.Value.GetRawText()));
                }
            }
            return new XmlAdvancedModel(
                name,
                age,
                enabled,
                score,
                optionalString,
                optionalInt,
                nullableString,
                id,
                version,
                isActive,
                originalName,
                xmlIdentifier,
                content,
                unwrappedStrings,
                unwrappedCounts,
                unwrappedItems,
                wrappedColors,
                items,
                nestedModel,
                optionalNestedModel,
                metadata,
                createdAt,
                duration,
                data,
                optionalRecordUnknown ?? new ChangeTrackingDictionary<string, BinaryData>(),
                fixedEnum,
                extensibleEnum,
                optionalFixedEnum,
                optionalExtensibleEnum,
                label,
                daysUsed,
                fooItems,
                anotherModel,
                modelsWithNamespaces,
                unwrappedModelsWithNamespaces,
                additionalBinaryDataProperties);
        }

        /// <param name="options"> The client options for reading and writing models. </param>
        BinaryData IPersistableModel<XmlAdvancedModel>.Write(ModelReaderWriterOptions options) => PersistableModelWriteCore(options);

        /// <param name="options"> The client options for reading and writing models. </param>
        protected virtual BinaryData PersistableModelWriteCore(ModelReaderWriterOptions options)
        {
            string format = options.Format == "W" ? ((IPersistableModel<XmlAdvancedModel>)this).GetFormatFromOptions(options) : options.Format;
            switch (format)
            {
                case "J":
                    return ModelReaderWriter.Write(this, options, SampleTypeSpecContext.Default);
                default:
                    throw new FormatException($"The model {nameof(XmlAdvancedModel)} does not support writing '{options.Format}' format.");
            }
        }

        /// <param name="data"> The data to parse. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        XmlAdvancedModel IPersistableModel<XmlAdvancedModel>.Create(BinaryData data, ModelReaderWriterOptions options) => PersistableModelCreateCore(data, options);

        /// <param name="data"> The data to parse. </param>
        /// <param name="options"> The client options for reading and writing models. </param>
        protected virtual XmlAdvancedModel PersistableModelCreateCore(BinaryData data, ModelReaderWriterOptions options)
        {
            string format = options.Format == "W" ? ((IPersistableModel<XmlAdvancedModel>)this).GetFormatFromOptions(options) : options.Format;
            switch (format)
            {
                case "J":
                    using (JsonDocument document = JsonDocument.Parse(data))
                    {
                        return DeserializeXmlAdvancedModel(document.RootElement, options);
                    }
                default:
                    throw new FormatException($"The model {nameof(XmlAdvancedModel)} does not support reading '{options.Format}' format.");
            }
        }

        /// <param name="options"> The client options for reading and writing models. </param>
        string IPersistableModel<XmlAdvancedModel>.GetFormatFromOptions(ModelReaderWriterOptions options) => "J";

        /// <param name="result"> The <see cref="ClientResult"/> to deserialize the <see cref="XmlAdvancedModel"/> from. </param>
        public static explicit operator XmlAdvancedModel(ClientResult result)
        {
            using PipelineResponse response = result.GetRawResponse();
            using JsonDocument document = JsonDocument.Parse(response.Content);
            return DeserializeXmlAdvancedModel(document.RootElement, ModelSerializationExtensions.WireOptions);
        }
    }
}
